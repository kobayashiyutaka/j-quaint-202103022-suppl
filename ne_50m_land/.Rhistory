par(mar=c(0,0,2,0))
plot(blocks,lwd=0.5,border='grey50')
plot(roads,col='blue',add=T)
title('New Haven, CT.')
map.scale(534750,152000,miles2ft(2),'Miles',4,0.5)
north.arrow(534750,154000,
miles2ft(0.25),col='lightgreen')
library(GISTools)
par(mar=c(0,0,2,0))
plot(blocks,lwd=0.5,border='grey50')
plot(roads,col='blue',add=T)
title('New Haven, CT.')
map.scale(534750,152000,miles2ft(2),'Miles',4,0.5)
north.arrow(534750,154000,
miles2ft(0.25),col='lightgreen')
library(GISTools)
data(newhaven)
par(mar=c(0,0,2,0))
plot(blocks,lwd=0.5,border='grey50')
plot(roads,col='blue',add=T)
title('New Haven, CT.')
map.scale(534750,152000,miles2ft(2),'Miles',4,0.5)
north.arrow(534750,154000,
miles2ft(0.25),col='lightgreen')
data(newhaven)
par(mar=c(0,0,2,0))
plot(blocks,lwd=0.5,border='grey50')
plot(roads,col='blue',lwd=2,add=T)
title('New Haven, CT.')
map.scale(534750,152000,miles2ft(2),'Miles',4,0.5)
north.arrow(534750,154000,
miles2ft(0.25),col='lightgreen')
pdf(file='map.pdf')
par(mar=c(0,0,2,0))
plot(blocks,lwd=0.5,border='grey50')
plot(roads,col='blue',lwd=2,add=T)
title('New Haven, CT.')
map.scale(534750,152000,miles2ft(2),'Miles',4,0.5)
north.arrow(534750,154000,
miles2ft(0.25),col='lightgreen')
dev.off()
lisf.files()
list.files()
getwd()
getwd()
setwd()
setwd('..')
list.files()
setwd('MainWork')
list.files()
setwd('Rdir')
getwd()
list.files()
rm(list=ls())
library(GISTools)
data(georgia)
ls()
par()
str(par())
plot(georgia,col='red',bg='wheat')
class(georgia)
georgia
names(georgia)
class(georgia$Latitude)
dim(georgia$Latitude)
georgia$Latitude
dim(georgia)
names(georgia)
georgia.outline <- gUnaryUnion(georgia,id=NULL)
georgia.outline
names(georgia.outline)
georgia.outline$l
georgia.outline[1]
attributes(georgia.outline)
str(georgia.outline)
plot(georgia,col='red',bg='wheat',lty=2,border='blue')
plot(georgia.outline,lwd=3,add=T)
title(main='The State of Georgia',font.main=2,cex.main=1.5,sub='and its counties',font.sub=3,col.sub='blue')
par(mfrow=c(1,2))
par(mar=c(2,0,3,0))
plot(georgia,col='red',bg='wheat')
title('georgia')
plot(georgia2,col='orange',bg='lightyellow3')
ls()
title('georgia2')
par(mfrow=c(1,1))
data.frame(georgia)[,13]
Lat <- data.frame(georgia)[,1]
Lon <- data.frame(georgia)[,2]
Names <- data.frame(georgia)[,13]
par(mar=c(0,0,0,0))
plot(georgia,col=NA)
pl <- pointLabel(Lon,Lat,Names,offet=0,cex=.5)
pl <- pointLabel(Lon,Lat,Names,offset=0,cex=.5)
pl
pl
county.tmp <- c(81,82,83,150,62,53,21,16,124,121,17)
georgia.sub <- georgia[county.tmp,]
par(mar=c(0,0,3,0))
plot(georgia.sub,col='gold1',border='grey')
plot(georgia.outline,add=T,lwd=2)
title('A subset of Georgia',cex.main=2,font.main=1)
pl <- pointLabel(Lon[county.tmp],Lat[county.tmp],Names[county.tmp],offset=3,cex=1.5)
pl <- pointLabel(Lon[county.tmp],Lat[county.tmp],Names[county.tmp],offset=0,cex=1.5)
plot(georgia.outline,add=T,lwd=2)
plot(georgia.sub,col='gold1',border='grey')
plot(georgia.outline,add=T,lwd=2)
pl <- pointLabel(Lon[county.tmp],Lat[county.tmp],Names[county.tmp],offset=0,cex=1.5)
plot(georgia,border='grey',lwd=0.5)
plot(georgia.sub,add=T,col='lightblue')
plot(georgia.outline,lwd=2,add=T)
title('Georgia with a subset of counties')
install.packages('OpenStreetMap',depend=T)
library(OpenStreetMap)
bbox(georgia.sub)
bbox(georgia.sub)[2,2]
diag(bbox(georgia.sub))
diag(bbox(georgia.sub))[c(2,1)]
MyMap <- openmap(c(-83.07378,33.54480),c(-81.38951,32.15218),9,'mapquest')
ls()
?OpenStreetMap
?openmap
OpenStreetMap
library(OpenStreetMap)
library(rJava)
library(rJava)
MyMap <- openmap(c(-83.07378,33.54480),c(-81.38951,32.15218),9,'mapquest')
library(OpenStreetMap)
MyMap <- openmap(c(-83.07378,33.54480),c(-81.38951,32.15218),9,'mapquest')
MyMap <- openmap(c(-83.07378,33.54480),c(-81.38951,32.15218),9,'osm-transport')
MyMap
plot(MyMap,removeMargin=F)
par(mar=c(0,0,0,0))
plot(MyMap,removeMargin=F)
plot(spTransform(georgia.sub,osm()),add=T,lwd=2)
ul<-as.vector(cbind(bbox(georgia.sub)[2,2],bbox(georgia.sub)[1,1]))
lr <- as.vector(cbind(bbox(georgia.sub)[2,1],bbox(georgia.sub)[1,2]))
MyMap <- openmap(ul,lr,9,'osm-public-transport')
plot(MyMpa)
plot(MyMap)
par(mar=c(0,0,0,0))
plot(MyMap,removeMaring=F)
plot(MyMap,removeMargin=F)
plot(spTransform(georgia.sub,osm()),add=T,lwd=2)
install.packages(c('RgoogleMaps','PBSmapping'),depend=T)
library(RgoogleMaps)
library(PBSmapping)
install.packages('rlang')
shp <- SpatialPolygons2PolySet(georgia.sub)
bb <- qbbox(lat=shp[,'Y'],lon=shp[,'X'])
MyMap <- GetMap.bbox(bb$lonR,bb$latR,destfile='DC.jpg')
par(mar=c(0,0,0,0))
PlotPolysOnStaticMap(MyMap,shp,lwd=2,col=rgb(0.25,0.25,0.25,0.25),add=F)
par(mar=c(5,4,4,2))
list.files()
rm(list=ls())
data(newhaven)
ls()
summary(blocks)
summary(breach)
summary(tracts)
class(blocks)
class(breach)
data.frame(blocks)
library(dplyr)
data.frame(blocks) %>% dim()
data.frame(blocks) %>% names()
head(data.frame(blocks))
data.frame(blocks) %>% names
data.frame(blocks)$P_VACANT
blocks$P_VACANT
breach.dens <- kde.points(breach,lims=tracts)
summary(breach.dens)
breach.dens
plot(breach.dens)
plot(blocks,add=T)
?kde.points
plot.kde.points
class(kde.points(breach,lims=tracts))
plot.SpatialPixelsDataFrame
names(breach.dens)
breach.dens$kde
attributes(breach.dens)
str(breach.dens)
plot(breach.dens)
plot(blocks,col='white')
plot(breach.dens)
plot(blocks,col='white',add=T)
plot(breach.dens)
class(blocks)
plot(blocks,border=2)
plot(blocks,border=3)
plot(blocks,border=4)
par(mfrow=c(1,1))
plot(blocks,border=4)
plot(blocks,border=3)
plot(breach.dens)
plot(blocks,border='red',add=T)
breach.dens.grid <- as(breach.dens,'SpatialGridDataFrame')
plot(breach.dens.grid)
plot(blocks,border='grey',add=T)
choropleth(blocks,blocks$P_VACANT)
choropleth(blocks,blocks$P_VACANT)
choropleth(blocks,blocks$P_VACANT)
choropleth(blocks,blocks$P_VACANT)
par()$mfrow
par(mfrow=c(1,1))
choropleth(blocks,blocks$P_VACANT)
choropleth(blocks,blocks$P_VACANT)
auto.shading()
vacant.shades <- auto.shading(blocks$P_VACANT)
vacant.shades
choro.legend(533000,161000,vacant.shades)
vacant.shades <- auto.shading(blocks$P_VACANT,n=7)
chropleth(blocks,blocks$P_VACANT,shading=vacant.shades)
choropleth(blocks,blocks$P_VACANT,shading=vacant.shades)
choro.legend(533000,161000,vacant.shades)
display.brewer.all()
brewer.pal(5,'Blues')
brewer.pal(10,'Blues')
brewer.pal(3,'Blues')
plot(brewer.pal(3,'Blues'))
brewer.pal(3,'Blues')
auto.shading
plot(breach)
plot(blocks)
plot(breach,add=T)
plot(blocks)
plot(breach,add=T,pch=2)
plot(blocks)
plot(breach,add=T,pch='@')
brewer.pal(5,'Reds')
add.alpha(brewer.pal(5,'Reds'),0.5)
par(mar=c(0,0,0,0))
plot(blocks,lwd=0.7,border='grey40')
plot(breach,add=T,pch=1,col='#DE2D26')
plot(breach,add=T,pch=1,col='#DE2D2680')
plot(breach,add=T,pch=1,col='#DE2D26')
plot(breach,add=T,pch=1,col='#A50F1580')
plot(breach,add=T,pch=1,col='#FEE5D980')
data(quakes)
head(quakes)
coords.tmp <- cbind(quakes$long,quakes$lat)
coords.tmp
quakes.spdf <- SpatialPointsDataFrame(coords.tmp,data=data.frame(quakes))
quakes.spdf
names(quakes.spdf)
par(mar=c(0,0,0,0))
par(mfrow=c(1,2))
plot(quakes.spdf)
plot(quakes.spdf,pch=1,col='#FB6A4A80')
help('SpatialPolygons-class')
data(georgia)
tmp <- georgia.polys[c(1,3,151,113)]
plot(tmp)
tmp
names(tmp)
str(tmp)
t1 <- Polygon(tmp[1])
t1 <- Polygons(list(t1),'1')
t1
t2 <- Polygon(tmp[2])
t2 <- Polygons(list(t2),'2')
t2
georgia.polys %>% class()
georgia.polys %>% names
georgia.polys %>% str
georgia.polys %>% glimpse
georgia.polys %>% attributes
tmp[1]
class(tmp[1])
tmp[[1]] %>%class
t3 <- Polygon*tmp
3
t3 <- Polygon(tmp[2])
t3 <- Polygons(list(t3),'2')
t3 <- Polygons(list(t3),'3')
t3 <- Polygon(tmp[2])
t3 <- Polygon(tmp[3])
t3 <- Polygons(list(t3),'3')
t4 <- Polygon(tmp[4])
t4 <- Polygons(list(t4),'4')
tmp.Sp <- SpatialPolygons(list(t1,t2,t3,t4),1:4)
tmp.Sp
plot(tmp.Sp)
plot(tmp.Sp,col=2:5)
nams <- c("Appling","Bacon","Wayne","Pierce")
names()
nams
tmp.spdf <- SpatialPolygonsDataFrame(tmp.Sp,data=data.frame(nams))
data.frame(tmp.spdf)
plot(tmp.spdf,col=2:5)
quakes
names(quakes)
quakes$mag
par(mfrow=c(2,2))
par(mar=c(0,0,0,0))
choropleth(quakes.spdf,quakes$mag)
shades <- auto.shading(quakes$mag,n=6,cols=brewer.pal(6,"Greens"))
shades
plot(shades)
choropleth(quakes.spdf,quakes$mag,shades,pch=1)
shades$cols <- add.alpha(shades$cols,0.5)
choropleth(quakes.spdf,quakes$mag,shading=shades,pch=20)
tmp<-quakes$mag
tmp<-tmp-min(tmp)
tmp<-tmp/max(tmp)
plot(quakes.spdf,cex=tmp*3,pch=1,col='#FB6A4A80')
par(mfrow=c(1,2))
par(mar=c(0,0,0,0))
tmp2 <- cut(quakes$mag,fivenum(quakes$mag),include.lowest=T)
tmp2
?fivenum
fivenum(quakes$mag)
cla <- match(tmp2,levels(tmp2))
cla
tmp2
levels(tmp)
levels(tmp2)
?match
pch.var <- c(0,1,2,5)
plot(quakes.spdf,pch=pch.var[cla],cex=0.7,col='#252525B3')
index.1 <- (quakes$mag >=4 & quakes$mag <5) + 0
index.2 <- (quakes$mag >=5 & quakes$mag < 5.5) * 2
index.3 <- (quakes$mag > 5.5) * 3
cla <- index.1 + index.2 + index.3
cla
col.var <- (brewer.pal(3,'Blues'))
plot(quakes.spdf,col=col.var[class],cex=1.4,pch=20)
plot(quakes.spdf,col=col.var[cla],cex=1.4,pch=20)
par(mfrow=c(1,1))
library(RgoogleMaps)
Lat <- as.vector(quakes$lat)
Long <- as.vector(quakes$long)
MyMap <- MapBackground(lat=Lat,lon = Long,zoom=10)
?MapBackground
install.packages('sf')
setdir('ne_110m_land')
getwd()
setwd('ne_110m_land')
list.files()
s <- readShapePoly('ne_110m_land.shp')
s <- sf::st_read('ne_110m_land.shp')
library(sf)
s <- sf::st_read('ne_110m_land.shp')
?sf::st_read
s<-rgdal::readOGR('ne_110m_land.shp')
s
plot(s)
locator()
plot(s,col='red')
plot(s,col='brown')
plot(s,col='brown',border=NULL)
plot(s,col='brown',border=na)
plot(s,col='brown',border='hite')
plot(s,col='brown',border='white')
plot(s,col='brown',border='brown')
plot(s,col='brown',lwd=0)
plot(s,col='brown',lwd=1)
plot(s,col='brown',lwd=0.1)
plot(s,col='brown',lwd=0.05)
plot(s,col='brown',lwd=2)
plot(s,col='brown',lwd=0.7)
plot(s,col='brown',lwd=0.1)
plot(s,col='brown',border=F)
s
names(s)
attributes(s)
s.poly
s$poly
s$featurecla
plot(s[1])
plot(s[2])
plot(s[[2])
plot(s[[2]])
plot(s[[3]])
plot(s[[4]])
s$scalerank
class(s)
names(s)
str(s)
dim(s)
s[1,]
s
s_df <- data.frame(s)
dim(s_df)
s_df[,1]
s_df[,2]
s_df[,3]
plot(s[1:10,])
plot(s[1:20,])
plot(s[1:50,])
plot(s[1:80,])
plot(s[1:100,])
plot(s[1:130,])
plot(s[1:127,])
plot(s[90:127,])
plot(s[90:90,])
plot(s[90:100,])
plot(s[90:127,])
plot(s[100:127,])
plot(s[110:127,])
plot(s[115:127,])
plot(s[112:127,])
plot(s[113:127,])
plot(s[114:127,])
plot(s[113:127,])
s
s[[1]]
s[1,]
names(s[1,])
plot(s)
slotNames(s[1,])
s[1,]@bbox
s[1,]@data
s[1,]@polygons
slotNames(s[1,])
s[1,]@porj4string
s[1,]@proj4string
?rgdal
??rgdal
getwd()
setwd('..')
getwd('ne_50m_land')
setwd('ne_50m_land')
list.files()
s<-readShapePoly('ne_50m_land.shp')
s<-rgdal::readOGR('ne_50m_land.shp')
s
plot(s)
plot(s,col='brown',border=F)
plot(s,col='grey',border=F)
plot(s,col='grey3',border=F)
plot(s,col='grey2',border=F)
plot(s,col='grey',border=F)
colors()
plot(s,col='darkgrey',border=F)
plot(s,col='darkgrey',border=F)
plot(s,col='grey2',border=F)
plot(s,col='grey4',border=F)
plot(s,col='grey50',border=F)
plot(s,col='gray5',border=F)
plot(s,col='gray10',border=F)
plot(s,col='gray20',border=F)
plot(s,col='gray66',border=F)
plot(s,col='gray45',border=F)
setwd('..')
setwd('ne_100m_land')
list.files()
setwd('ne_110m_land')
s <- rgdal::readOGR('ne_110m_land.shp')
plot(s,col='gray45',border=F)
setwd('..')
setwd('ne_50m_land')
s50 <- rgdal::readOGR('ne_50m_land.shp')
plot(s50,col='grey45',border=F)
plot(s50,col='grey45',border=F,background=0)
plot(s50,col=c('black','grey45'),border=F)
plot(s50,col='grey45',border=F)
plot(s50,bg='grey45',border=F)
plot(s50,bg='grey45',col='white',border=F)
plot(s50,bg='blue',border=F)
plot(s50,bg='blue',col='white',border=F)
plot(s50,bg='blue50',col='white',border=F)
plot(s50,bg='blue3',col='white',border=F)
plot(s50,bg='grey60',col='white',border=F)
plot(s50,bg='grey70',col='white',border=F)
plot(s50,bg='grey40',col='white',border=F)
plot(s,bg='grey40',col='white',border=F)
plot(s50,bg='grey40',col='white',border=F)
locator()
s
s50
plot(s50,bg='grey40',col='white',border=F,xlim=c(-150,150))
plot(s50,bg='grey40',col='white',border=F,xlim=c(-150,180))
plot(s50,bg='grey40',col='white',border=F,xlim=c(-100,180))
plot(s50,bg='grey40',col='white',border=F,xlim=c(-80,180))
plot(s50,bg='grey40',col='white',border=F,xlim=c(-10,180))
plot(s50,bg='grey40',col='white',border=F,xlim=c(-10,180),ylim=c(-60,90))
plot(s50,bg='grey40',col='white',border=F,xlim=c(-10,180),ylim=c(-40,90))
plot(s50,bg='grey40',col='white',border=F,xlim=c(-10,180),ylim=c(-40,90),asp=1)
plot(s50,bg='grey40',col='white',border=F,xlim=c(-10,180),ylim=c(-40,90),asp=2)
plot(s50,bg='grey40',col='white',border=F,xlim=c(-10,180),ylim=c(-40,90),asp=1)
plot(s50,bg='grey40',col='white',border=F,xlim=c(-10,180),ylim=c(-300,90),asp=1)
plot(s50,bg='grey40',col='white',border=F,xlim=c(-10,180),ylim=c(-30,90),asp=1)
plot(s50,bg='grey40',col='white',border=F,xlim=c(-20,180),ylim=c(-30,90),asp=1)
plot(s50,bg='grey40',col='white',border=F,xlim=c(-15,180),ylim=c(-30,90),asp=1)
plot(s50,bg='grey40',col='white',border=F,xlim=c(-15,180),ylim=c(-10,90),asp=1)
plot(s50,bg='grey40',col='white',border=F,xlim=c(-15,180),ylim=c(-10,60),asp=1)
plot(s50,bg='grey40',col='white',border=F,xlim=c(-15,180))
plot(s50,bg='grey40',col='white',border=F,xlim=c(-15,180),asp=1)
plot(s50,bg='grey40',col='white',border=F,xlim=c(-15,180),asp=1,ylim=c(-50,90))
plot(s50,bg='grey40',col='white',border=F,xlim=c(-15,180),asp=1,ylim=c(-40,80))
plot(s50,bg='grey40',col='white',border=F,xlim=c(-15,180),asp=1,ylim=c(-40,90))
plot(s50,bg='grey40',col='white',border=F,xlim=c(-15,180),asp=1,ylim=c(-30,60))
plot(s50,bg='grey40',col='white',border=F,xlim=c(-15,180),asp=1,ylim=c(-30,90))
list.files()
plot(s50,bg='grey40',lwd=2,xlim=c(-15,180),asp=1,ylim=c(-30,60))
plot(s50,lwd=2,xlim=c(-15,180),asp=1,ylim=c(-30,60))
plot(s50,lwd=1,xlim=c(-15,180),asp=1,ylim=c(-30,60))
plot(s50,lwd=0.5,xlim=c(-15,180),asp=1,ylim=c(-30,60))
plot(s50,col='grey45',border=F,xlim=c(-15,180),asp=1,ylim=c(-30,60))
plot(s50,bg='grey45',border=F,xlim=c(-15,180),asp=1,ylim=c(-30,60))
plot(s50,bg='grey45',border=F,col='white'xlim=c(-15,180),asp=1,ylim=c(-30,60))
plot(s50,bg='grey45',border=F,col='white',xlim=c(-15,180),asp=1,ylim=c(-30,60))
plot(s50,bg='grey45',border=F,col='white',xlim=c(-15,180),asp=1,ylim=c(-30,90))
plot(s50,bg='grey45',border=F,col='white',xlim=c(-15,180),asp=1,ylim=c(-10,90))
plot(s50,bg='grey45',border=F,col='white',xlim=c(-15,180),asp=1,ylim=c(-30,90))
plot(s50[2:nrow(s50),],bg='grey45',border=F,col='white',xlim=c(-15,180),asp=1,ylim=c(-30,90))
plot(s50[3:nrow(s50),],bg='grey45',border=F,col='white',xlim=c(-15,180),asp=1,ylim=c(-30,90))
plot(s50[10:nrow(s50),],bg='grey45',border=F,col='white',xlim=c(-15,180),asp=1,ylim=c(-30,90))
plot(s50,bg='grey45',border=F,col='white',xlim=c(-15,180),asp=1,ylim=c(-30,90))
